{"ast":null,"code":"var _jsxFileName = \"D:\\\\documents\\\\Desktop\\\\CSE-DB\\\\frontend\\\\src\\\\pages\\\\Forums.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport { Box, Typography, Grid, Card, CardContent, Button, TextField, MenuItem, Fade, Chip, IconButton, Dialog, DialogTitle, DialogContent, DialogActions, FormControlLabel, Checkbox, Select, FormControl, InputLabel, InputAdornment, Paper, List, ListItem, ListItemText, Divider, Snackbar, Alert, CircularProgress } from '@mui/material';\nimport ThumbUpIcon from '@mui/icons-material/ThumbUp';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport ReportIcon from '@mui/icons-material/Report';\nimport AddIcon from '@mui/icons-material/Add';\nimport SearchIcon from '@mui/icons-material/Search';\nimport CloseIcon from '@mui/icons-material/Close';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { UserContext } from '../App';\nimport { useSocket } from '../contexts/SocketContext';\nimport fetchWithAuth from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst categories = ['All', 'DBMS', 'AI', 'OS', 'CN', 'ML', 'General'];\nconst Forums = () => {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    on,\n    off,\n    emit,\n    connected\n  } = useSocket();\n  const [search, setSearch] = useState(\"\");\n  const [category, setCategory] = useState('All');\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const [showViewDialog, setShowViewDialog] = useState(false);\n  const [selectedThread, setSelectedThread] = useState(null);\n  const [newThread, setNewThread] = useState({\n    topic: '',\n    category: 'General',\n    anonymous: false,\n    content: '',\n    google_form_link: '',\n    google_sheet_link: ''\n  });\n  const [threads, setThreads] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [creating, setCreating] = useState(false);\n  const [notification, setNotification] = useState({\n    open: false,\n    message: '',\n    severity: 'info'\n  });\n\n  // Fetch threads from database\n  React.useEffect(() => {\n    fetchWithAuth('/api/forums').then(res => res.ok ? res.json() : []).then(data => {\n      setThreads(data);\n      setLoading(false);\n    }).catch(err => {\n      console.error('Error fetching forums:', err);\n      setThreads([]);\n      setLoading(false);\n    });\n  }, []);\n\n  // Real-time forum listeners\n  React.useEffect(() => {\n    if (!connected) return;\n    const handleNewThread = thread => {\n      setThreads(prev => [thread, ...prev]);\n      setNotification({\n        open: true,\n        message: `ðŸ’¬ New forum thread: ${thread.topic}`,\n        severity: 'info'\n      });\n    };\n    const handleThreadDeleted = threadId => {\n      setThreads(prev => prev.filter(t => t._id !== threadId));\n      setNotification({\n        open: true,\n        message: 'ðŸ—‘ï¸ Thread deleted',\n        severity: 'warning'\n      });\n    };\n    on('forum:new', handleNewThread);\n    on('forum:deleted', handleThreadDeleted);\n    return () => {\n      off('forum:new', handleNewThread);\n      off('forum:deleted', handleThreadDeleted);\n    };\n  }, [connected, on, off]);\n\n  // Permissions - Faculty/HOD/DEAN can create and moderate\n  const canCreate = user && ['HOD', 'DEAN', 'Faculty'].includes(user === null || user === void 0 ? void 0 : user.role);\n  const canModerate = user && ['HOD', 'DEAN', 'Faculty'].includes(user === null || user === void 0 ? void 0 : user.role);\n  const canEdit = thread => {\n    if (!user) return false;\n    if (['HOD', 'DEAN'].includes(user.role)) return true;\n    if (user.role === 'Faculty') return thread.created_by === user.id;\n    return false;\n  };\n  const canDelete = thread => {\n    if (!user) return false;\n    if (['HOD', 'DEAN'].includes(user.role)) return true;\n    if (user.role === 'Faculty') return thread.created_by === user.id;\n    return false;\n  };\n  const canMarkAccepted = user && ['HOD', 'DEAN', 'Faculty'].includes(user === null || user === void 0 ? void 0 : user.role);\n  const filtered = threads.filter(t => (category === 'All' || t.category === category) && t.topic.toLowerCase().includes(search.toLowerCase()));\n  const handleUpvote = async id => {\n    try {\n      const res = await fetchWithAuth(`/api/forums/${id}/upvote`, {\n        method: 'POST'\n      });\n      if (res.ok) {\n        setThreads(prev => prev.map(t => t._id === id ? {\n          ...t,\n          upvotes: (t.upvotes || 0) + 1\n        } : t));\n      }\n    } catch (err) {\n      console.error('Error upvoting:', err);\n    }\n  };\n  const handleMarkAccepted = async id => {\n    if (!canMarkAccepted) return;\n    try {\n      const res = await fetchWithAuth(`/api/forums/${id}/accept`, {\n        method: 'PUT'\n      });\n      if (res.ok) {\n        setThreads(prev => prev.map(t => t._id === id ? {\n          ...t,\n          accepted: !t.accepted\n        } : t));\n        setNotification({\n          open: true,\n          message: 'âœ… Thread marked as accepted',\n          severity: 'success'\n        });\n      }\n    } catch (err) {\n      console.error('Error marking accepted:', err);\n      setNotification({\n        open: true,\n        message: 'âŒ Failed to update status',\n        severity: 'error'\n      });\n    }\n  };\n  const handleCreateThread = async () => {\n    if (!newThread.topic || !newThread.content) {\n      setNotification({\n        open: true,\n        message: 'Please fill in topic and content',\n        severity: 'error'\n      });\n      return;\n    }\n    setCreating(true);\n    try {\n      const res = await fetchWithAuth('/api/forums', {\n        method: 'POST',\n        body: JSON.stringify(newThread)\n      });\n      if (res.ok) {\n        const createdThread = await res.json();\n        setThreads(prev => [createdThread, ...prev]);\n        if (connected) {\n          emit('forum:created', createdThread);\n        }\n        setNotification({\n          open: true,\n          message: 'âœ… Thread created successfully',\n          severity: 'success'\n        });\n        setShowCreateDialog(false);\n        setNewThread({\n          topic: '',\n          category: 'General',\n          anonymous: false,\n          content: '',\n          google_form_link: '',\n          google_sheet_link: ''\n        });\n      } else {\n        throw new Error('Creation failed');\n      }\n    } catch (err) {\n      console.error('Error creating thread:', err);\n      setNotification({\n        open: true,\n        message: 'âŒ Failed to create thread',\n        severity: 'error'\n      });\n    } finally {\n      setCreating(false);\n    }\n  };\n  const handleDeleteThread = async id => {\n    if (!window.confirm('Are you sure you want to delete this thread?')) return;\n    try {\n      const res = await fetchWithAuth(`/api/forums/${id}`, {\n        method: 'DELETE'\n      });\n      if (res.ok) {\n        setThreads(prev => prev.filter(t => t._id !== id));\n        if (connected) {\n          emit('forum:deleted', id);\n        }\n        setNotification({\n          open: true,\n          message: 'âœ… Thread deleted',\n          severity: 'success'\n        });\n      } else {\n        throw new Error('Delete failed');\n      }\n    } catch (err) {\n      console.error('Error deleting thread:', err);\n      setNotification({\n        open: true,\n        message: 'âŒ Failed to delete thread',\n        severity: 'error'\n      });\n    }\n  };\n  const handleReport = id => {\n    console.log('Reporting thread:', id);\n    alert('Thread reported to moderators');\n  };\n  const handleViewThread = thread => {\n    setSelectedThread(thread);\n    setShowViewDialog(true);\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n  };\n  const renderCreateDialog = () => /*#__PURE__*/_jsxDEV(Dialog, {\n    open: showCreateDialog,\n    onClose: () => setShowCreateDialog(false),\n    maxWidth: \"sm\",\n    fullWidth: true,\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      children: [\"Create New Thread\", /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => setShowCreateDialog(false),\n        sx: {\n          position: 'absolute',\n          right: 8,\n          top: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      dividers: true,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Thread Topic\",\n        placeholder: \"Enter your question or topic\",\n        value: newThread.topic,\n        onChange: e => setNewThread({\n          ...newThread,\n          topic: e.target.value\n        }),\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Content\",\n        placeholder: \"Provide details about your question\",\n        value: newThread.content,\n        onChange: e => setNewThread({\n          ...newThread,\n          content: e.target.value\n        }),\n        multiline: true,\n        rows: 4,\n        sx: {\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        fullWidth: true,\n        sx: {\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: newThread.category,\n          label: \"Category\",\n          onChange: e => setNewThread({\n            ...newThread,\n            category: e.target.value\n          }),\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"DBMS\",\n            children: \"DBMS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"AI\",\n            children: \"AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"ML\",\n            children: \"ML\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"OS\",\n            children: \"OS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n        control: /*#__PURE__*/_jsxDEV(Checkbox, {\n          checked: newThread.anonymous,\n          onChange: e => setNewThread({\n            ...newThread,\n            anonymous: e.target.checked\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this),\n        label: \"Post anonymously\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => setShowCreateDialog(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleCreateThread,\n        variant: \"contained\",\n        disabled: !newThread.topic.trim() || !newThread.content.trim(),\n        children: \"Create Thread\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      maxWidth: 1400,\n      mx: 'auto',\n      p: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          fontWeight: 700,\n          sx: {\n            mb: 0.5\n          },\n          children: \"\\uD83D\\uDCAC Discussion Forums\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: \"Ask questions, share knowledge, and engage with peers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), canCreate && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"info\",\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 24\n        }, this),\n        onClick: () => setShowCreateDialog(true),\n        sx: {\n          borderRadius: 2,\n          px: 3,\n          py: 1.5,\n          fontWeight: 600,\n          boxShadow: 3,\n          '&:hover': {\n            boxShadow: 6,\n            transform: 'translateY(-2px)'\n          },\n          transition: '0.3s'\n        },\n        children: \"+ Create Thread\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        gap: 2,\n        mb: 3,\n        flexWrap: 'wrap'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        placeholder: \"Search threads...\",\n        value: search,\n        onChange: e => setSearch(e.target.value),\n        sx: {\n          minWidth: 250\n        },\n        InputProps: {\n          startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"start\",\n            children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 15\n          }, this)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        sx: {\n          minWidth: 150\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: category,\n          label: \"Category\",\n          onChange: e => setCategory(e.target.value),\n          children: categories.map(c => /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: c,\n            children: c\n          }, c, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        sx: {\n          minWidth: 180\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          children: \"Post Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: postType,\n          label: \"Post Type\",\n          onChange: e => setPostType(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"\",\n            children: \"All Post Types\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"Announcement\",\n            children: \"Announcement\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"Event\",\n            children: \"Event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"Assignment\",\n            children: \"Assignment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"Project\",\n            children: \"Project\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"Forum\",\n            children: \"Forum\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: filtered.map(t => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            height: '100%',\n            '&:hover': {\n              boxShadow: 6\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              fontWeight: \"bold\",\n              mb: 2,\n              children: t.topic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 1,\n                flexWrap: 'wrap',\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Chip, {\n                label: t.category,\n                color: \"primary\",\n                size: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 19\n              }, this), t.accepted && /*#__PURE__*/_jsxDEV(Chip, {\n                label: \"Accepted Solution\",\n                color: \"success\",\n                size: \"small\",\n                icon: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 21\n              }, this), t.anonymous && /*#__PURE__*/_jsxDEV(Chip, {\n                label: \"Anonymous\",\n                color: \"warning\",\n                size: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: 2,\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"small\",\n                startIcon: /*#__PURE__*/_jsxDEV(ThumbUpIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 32\n                }, this),\n                onClick: () => handleUpvote(t.id),\n                color: \"primary\",\n                children: [t.upvotes, \" Upvotes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this), canMarkAccepted && /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => handleMarkAccepted(t.id),\n                color: t.accepted ? \"success\" : \"default\",\n                title: t.accepted ? \"Unmark as accepted\" : \"Mark as accepted\",\n                children: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 1,\n                flexWrap: 'wrap'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                size: \"small\",\n                onClick: () => handleViewThread(t),\n                children: \"View Thread\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                color: \"secondary\",\n                size: \"small\",\n                children: \"Moderate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this), canDelete(t) && /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                color: \"error\",\n                onClick: () => handleDeleteThread(t.id),\n                title: \"Delete thread\",\n                children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                color: \"warning\",\n                onClick: () => handleReport(t.id),\n                title: \"Report thread\",\n                children: /*#__PURE__*/_jsxDEV(ReportIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this)\n      }, t.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this), renderCreateDialog(), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showViewDialog,\n      onClose: () => setShowViewDialog(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            fontWeight: 600,\n            children: selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.topic\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 1,\n              display: 'flex',\n              gap: 1,\n              flexWrap: 'wrap',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Chip, {\n              label: selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.category,\n              color: \"primary\",\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this), (selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.accepted) && /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"Accepted Solution\",\n              color: \"success\",\n              size: \"small\",\n              icon: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this), selectedThread !== null && selectedThread !== void 0 && selectedThread.anonymous ? /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"Posted by: Anonymous\",\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n              label: `Posted by: ${selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.created_by}`,\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: `Date: ${selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.created_at}`,\n              variant: \"outlined\",\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                ml: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(ThumbUpIcon, {\n                fontSize: \"small\",\n                sx: {\n                  mr: 0.5\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: [selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.upvotes, \" upvotes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        dividers: true,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"text.secondary\",\n            gutterBottom: true,\n            children: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            sx: {\n              whiteSpace: 'pre-wrap'\n            },\n            children: selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this), ((selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.googleFormLink) || (selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.googleSheetLink)) && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"text.secondary\",\n            gutterBottom: true,\n            children: \"Related Links\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Paper, {\n            variant: \"outlined\",\n            sx: {\n              p: 2\n            },\n            children: [(selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.googleFormLink) && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              startIcon: /*#__PURE__*/_jsxDEV(OpenInNewIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 32\n              }, this),\n              href: selectedThread.googleFormLink,\n              target: \"_blank\",\n              fullWidth: true,\n              sx: {\n                mb: selectedThread !== null && selectedThread !== void 0 && selectedThread.googleSheetLink ? 1 : 0\n              },\n              children: \"Open Google Form\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 19\n            }, this), (selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.googleSheetLink) && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              startIcon: /*#__PURE__*/_jsxDEV(OpenInNewIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 32\n              }, this),\n              href: selectedThread.googleSheetLink,\n              target: \"_blank\",\n              fullWidth: true,\n              children: \"Open Google Sheet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this), (selectedThread === null || selectedThread === void 0 ? void 0 : selectedThread.attachments) && selectedThread.attachments.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"text.secondary\",\n            gutterBottom: true,\n            children: [\"Attachments (\", selectedThread.attachments.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Paper, {\n            variant: \"outlined\",\n            children: /*#__PURE__*/_jsxDEV(List, {\n              children: selectedThread.attachments.map((att, idx) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(AttachFileIcon, {\n                    sx: {\n                      mr: 2,\n                      color: 'text.secondary'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: att.name,\n                    secondary: `${formatFileSize(att.size || 0)} â€¢ ${att.type || 'File'}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    size: \"small\",\n                    onClick: () => {\n                      console.log('Download:', att.name);\n                    },\n                    children: \"Download\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 23\n                }, this), idx < selectedThread.attachments.length - 1 && /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 71\n                }, this)]\n              }, att.id || idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          startIcon: /*#__PURE__*/_jsxDEV(ThumbUpIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 24\n          }, this),\n          onClick: () => {\n            handleUpvote(selectedThread.id);\n            setSelectedThread({\n              ...selectedThread,\n              upvotes: selectedThread.upvotes + 1\n            });\n          },\n          children: \"Upvote\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this), canMarkAccepted && /*#__PURE__*/_jsxDEV(Button, {\n          startIcon: /*#__PURE__*/_jsxDEV(CheckCircleIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 26\n          }, this),\n          color: selectedThread !== null && selectedThread !== void 0 && selectedThread.accepted ? \"success\" : \"default\",\n          onClick: () => {\n            handleMarkAccepted(selectedThread.id);\n            setSelectedThread({\n              ...selectedThread,\n              accepted: !selectedThread.accepted\n            });\n          },\n          children: selectedThread !== null && selectedThread !== void 0 && selectedThread.accepted ? 'Unmark' : 'Mark as Accepted'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShowViewDialog(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: notification.open,\n      autoHideDuration: 6000,\n      onClose: () => setNotification({\n        ...notification,\n        open: false\n      }),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'right'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setNotification({\n          ...notification,\n          open: false\n        }),\n        severity: notification.severity,\n        sx: {\n          width: '100%'\n        },\n        children: notification.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 295,\n    columnNumber: 5\n  }, this);\n};\n_s(Forums, \"VpnbJmV05cvX22QG8UCR6Aq2AIk=\", false, function () {\n  return [useSocket];\n});\n_c = Forums;\nexport default Forums;\nvar _c;\n$RefreshReg$(_c, \"Forums\");","map":{"version":3,"names":["React","useState","useContext","Box","Typography","Grid","Card","CardContent","Button","TextField","MenuItem","Fade","Chip","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","FormControlLabel","Checkbox","Select","FormControl","InputLabel","InputAdornment","Paper","List","ListItem","ListItemText","Divider","Snackbar","Alert","CircularProgress","ThumbUpIcon","CheckCircleIcon","DeleteIcon","ReportIcon","AddIcon","SearchIcon","CloseIcon","OpenInNewIcon","AttachFileIcon","UserContext","useSocket","fetchWithAuth","jsxDEV","_jsxDEV","categories","Forums","_s","user","on","off","emit","connected","search","setSearch","category","setCategory","showCreateDialog","setShowCreateDialog","showViewDialog","setShowViewDialog","selectedThread","setSelectedThread","newThread","setNewThread","topic","anonymous","content","google_form_link","google_sheet_link","threads","setThreads","loading","setLoading","creating","setCreating","notification","setNotification","open","message","severity","useEffect","then","res","ok","json","data","catch","err","console","error","handleNewThread","thread","prev","handleThreadDeleted","threadId","filter","t","_id","canCreate","includes","role","canModerate","canEdit","created_by","id","canDelete","canMarkAccepted","filtered","toLowerCase","handleUpvote","method","map","upvotes","handleMarkAccepted","accepted","handleCreateThread","body","JSON","stringify","createdThread","Error","handleDeleteThread","window","confirm","handleReport","log","alert","handleViewThread","formatFileSize","bytes","k","sizes","i","Math","floor","round","pow","renderCreateDialog","onClose","maxWidth","fullWidth","children","onClick","sx","position","right","top","fileName","_jsxFileName","lineNumber","columnNumber","dividers","label","placeholder","value","onChange","e","target","mb","multiline","rows","control","checked","variant","disabled","trim","mx","p","display","justifyContent","alignItems","fontWeight","color","startIcon","borderRadius","px","py","boxShadow","transform","transition","gap","flexWrap","minWidth","InputProps","startAdornment","c","postType","setPostType","container","spacing","item","xs","md","height","size","icon","title","mt","created_at","ml","fontSize","mr","gutterBottom","whiteSpace","googleFormLink","googleSheetLink","href","attachments","length","att","idx","Fragment","primary","name","secondary","type","autoHideDuration","anchorOrigin","vertical","horizontal","width","_c","$RefreshReg$"],"sources":["D:/documents/Desktop/CSE-DB/frontend/src/pages/Forums.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { \r\n  Box, Typography, Grid, Card, CardContent, Button, TextField, MenuItem, Fade, Chip, \r\n  IconButton, Dialog, DialogTitle, DialogContent, DialogActions, FormControlLabel, \r\n  Checkbox, Select, FormControl, InputLabel, InputAdornment, Paper, List, ListItem,\r\n  ListItemText, Divider, Snackbar, Alert, CircularProgress\r\n} from '@mui/material';\r\nimport ThumbUpIcon from '@mui/icons-material/ThumbUp';\r\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport ReportIcon from '@mui/icons-material/Report';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\r\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\r\nimport { UserContext } from '../App';\r\nimport { useSocket } from '../contexts/SocketContext';\r\nimport fetchWithAuth from '../utils/api';\r\n\r\nconst categories = ['All', 'DBMS', 'AI', 'OS', 'CN', 'ML', 'General'];\r\n\r\nconst Forums = () => {\r\n  const { user } = useContext(UserContext);\r\n  const { on, off, emit, connected } = useSocket();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [category, setCategory] = useState('All');\r\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\r\n  const [showViewDialog, setShowViewDialog] = useState(false);\r\n  const [selectedThread, setSelectedThread] = useState(null);\r\n  const [newThread, setNewThread] = useState({ \r\n    topic: '', \r\n    category: 'General', \r\n    anonymous: false, \r\n    content: '',\r\n    google_form_link: '',\r\n    google_sheet_link: ''\r\n  });\r\n  const [threads, setThreads] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [creating, setCreating] = useState(false);\r\n  const [notification, setNotification] = useState({ open: false, message: '', severity: 'info' });\r\n\r\n  // Fetch threads from database\r\n  React.useEffect(() => {\r\n    fetchWithAuth('/api/forums')\r\n      .then(res => res.ok ? res.json() : [])\r\n      .then(data => {\r\n        setThreads(data);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching forums:', err);\r\n        setThreads([]);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  // Real-time forum listeners\r\n  React.useEffect(() => {\r\n    if (!connected) return;\r\n\r\n    const handleNewThread = (thread) => {\r\n      setThreads(prev => [thread, ...prev]);\r\n      setNotification({ open: true, message: `ðŸ’¬ New forum thread: ${thread.topic}`, severity: 'info' });\r\n    };\r\n\r\n    const handleThreadDeleted = (threadId) => {\r\n      setThreads(prev => prev.filter(t => t._id !== threadId));\r\n      setNotification({ open: true, message: 'ðŸ—‘ï¸ Thread deleted', severity: 'warning' });\r\n    };\r\n\r\n    on('forum:new', handleNewThread);\r\n    on('forum:deleted', handleThreadDeleted);\r\n\r\n    return () => {\r\n      off('forum:new', handleNewThread);\r\n      off('forum:deleted', handleThreadDeleted);\r\n    };\r\n  }, [connected, on, off]);\r\n  \r\n  // Permissions - Faculty/HOD/DEAN can create and moderate\r\n  const canCreate = user && ['HOD', 'DEAN', 'Faculty'].includes(user?.role);\r\n  const canModerate = user && ['HOD', 'DEAN', 'Faculty'].includes(user?.role);\r\n  const canEdit = (thread) => {\r\n    if (!user) return false;\r\n    if (['HOD', 'DEAN'].includes(user.role)) return true;\r\n    if (user.role === 'Faculty') return thread.created_by === user.id;\r\n    return false;\r\n  };\r\n  const canDelete = (thread) => {\r\n    if (!user) return false;\r\n    if (['HOD', 'DEAN'].includes(user.role)) return true;\r\n    if (user.role === 'Faculty') return thread.created_by === user.id;\r\n    return false;\r\n  };\r\n  const canMarkAccepted = user && ['HOD', 'DEAN', 'Faculty'].includes(user?.role);\r\n  \r\n  const filtered = threads.filter(t =>\r\n    (category === 'All' || t.category === category) &&\r\n    t.topic.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  const handleUpvote = async (id) => {\r\n    try {\r\n      const res = await fetchWithAuth(`/api/forums/${id}/upvote`, { method: 'POST' });\r\n      \r\n      if (res.ok) {\r\n        setThreads(prev => prev.map(t => \r\n          t._id === id ? { ...t, upvotes: (t.upvotes || 0) + 1 } : t\r\n        ));\r\n      }\r\n    } catch (err) {\r\n      console.error('Error upvoting:', err);\r\n    }\r\n  };\r\n\r\n  const handleMarkAccepted = async (id) => {\r\n    if (!canMarkAccepted) return;\r\n\r\n    try {\r\n      const res = await fetchWithAuth(`/api/forums/${id}/accept`, { method: 'PUT' });\r\n      \r\n      if (res.ok) {\r\n        setThreads(prev => prev.map(t => \r\n          t._id === id ? { ...t, accepted: !t.accepted } : t\r\n        ));\r\n        setNotification({ open: true, message: 'âœ… Thread marked as accepted', severity: 'success' });\r\n      }\r\n    } catch (err) {\r\n      console.error('Error marking accepted:', err);\r\n      setNotification({ open: true, message: 'âŒ Failed to update status', severity: 'error' });\r\n    }\r\n  };\r\n\r\n  const handleCreateThread = async () => {\r\n    if (!newThread.topic || !newThread.content) {\r\n      setNotification({ open: true, message: 'Please fill in topic and content', severity: 'error' });\r\n      return;\r\n    }\r\n\r\n    setCreating(true);\r\n\r\n    try {\r\n      const res = await fetchWithAuth('/api/forums', {\r\n        method: 'POST',\r\n        body: JSON.stringify(newThread)\r\n      });\r\n\r\n      if (res.ok) {\r\n        const createdThread = await res.json();\r\n        setThreads(prev => [createdThread, ...prev]);\r\n        \r\n        if (connected) {\r\n          emit('forum:created', createdThread);\r\n        }\r\n\r\n        setNotification({ open: true, message: 'âœ… Thread created successfully', severity: 'success' });\r\n        setShowCreateDialog(false);\r\n        setNewThread({ \r\n          topic: '', \r\n          category: 'General', \r\n          anonymous: false, \r\n          content: '',\r\n          google_form_link: '',\r\n          google_sheet_link: ''\r\n        });\r\n      } else {\r\n        throw new Error('Creation failed');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error creating thread:', err);\r\n      setNotification({ open: true, message: 'âŒ Failed to create thread', severity: 'error' });\r\n    } finally {\r\n      setCreating(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteThread = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this thread?')) return;\r\n\r\n    try {\r\n      const res = await fetchWithAuth(`/api/forums/${id}`, { method: 'DELETE' });\r\n\r\n      if (res.ok) {\r\n        setThreads(prev => prev.filter(t => t._id !== id));\r\n        \r\n        if (connected) {\r\n          emit('forum:deleted', id);\r\n        }\r\n\r\n        setNotification({ open: true, message: 'âœ… Thread deleted', severity: 'success' });\r\n      } else {\r\n        throw new Error('Delete failed');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error deleting thread:', err);\r\n      setNotification({ open: true, message: 'âŒ Failed to delete thread', severity: 'error' });\r\n    }\r\n  };\r\n\r\n  const handleReport = (id) => {\r\n    console.log('Reporting thread:', id);\r\n    alert('Thread reported to moderators');\r\n  };\r\n\r\n  const handleViewThread = (thread) => {\r\n    setSelectedThread(thread);\r\n    setShowViewDialog(true);\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const renderCreateDialog = () => (\r\n    <Dialog \r\n      open={showCreateDialog} \r\n      onClose={() => setShowCreateDialog(false)}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle>\r\n        Create New Thread\r\n        <IconButton\r\n          onClick={() => setShowCreateDialog(false)}\r\n          sx={{ position: 'absolute', right: 8, top: 8 }}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      <DialogContent dividers>\r\n        <TextField\r\n          fullWidth\r\n          label=\"Thread Topic\"\r\n          placeholder=\"Enter your question or topic\"\r\n          value={newThread.topic}\r\n          onChange={(e) => setNewThread({ ...newThread, topic: e.target.value })}\r\n          sx={{ mb: 2 }}\r\n        />\r\n        \r\n        <TextField\r\n          fullWidth\r\n          label=\"Content\"\r\n          placeholder=\"Provide details about your question\"\r\n          value={newThread.content}\r\n          onChange={(e) => setNewThread({ ...newThread, content: e.target.value })}\r\n          multiline\r\n          rows={4}\r\n          sx={{ mb: 2 }}\r\n        />\r\n        \r\n        <FormControl fullWidth sx={{ mb: 2 }}>\r\n          <InputLabel>Category</InputLabel>\r\n          <Select\r\n            value={newThread.category}\r\n            label=\"Category\"\r\n            onChange={(e) => setNewThread({ ...newThread, category: e.target.value })}\r\n          >\r\n            <MenuItem value=\"DBMS\">DBMS</MenuItem>\r\n            <MenuItem value=\"AI\">AI</MenuItem>\r\n            <MenuItem value=\"ML\">ML</MenuItem>\r\n            <MenuItem value=\"OS\">OS</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n        \r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={newThread.anonymous}\r\n              onChange={(e) => setNewThread({ ...newThread, anonymous: e.target.checked })}\r\n            />\r\n          }\r\n          label=\"Post anonymously\"\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => setShowCreateDialog(false)}>Cancel</Button>\r\n        <Button \r\n          onClick={handleCreateThread}\r\n          variant=\"contained\"\r\n          disabled={!newThread.topic.trim() || !newThread.content.trim()}\r\n        >\r\n          Create Thread\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 1400, mx: 'auto', p: 3 }}>\r\n      {/* Header */}\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\r\n        <Box>\r\n          <Typography variant=\"h4\" fontWeight={700} sx={{ mb: 0.5 }}>ðŸ’¬ Discussion Forums</Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">Ask questions, share knowledge, and engage with peers</Typography>\r\n        </Box>\r\n        {canCreate && (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"info\"\r\n            startIcon={<AddIcon />}\r\n            onClick={() => setShowCreateDialog(true)}\r\n            sx={{ \r\n              borderRadius: 2, \r\n              px: 3, \r\n              py: 1.5, \r\n              fontWeight: 600,\r\n              boxShadow: 3,\r\n              '&:hover': { boxShadow: 6, transform: 'translateY(-2px)' },\r\n              transition: '0.3s'\r\n            }}\r\n          >\r\n            + Create Thread\r\n          </Button>\r\n        )}\r\n      </Box>\r\n      \r\n      {/* Filters */}\r\n      <Box sx={{ display: 'flex', gap: 2, mb: 3, flexWrap: 'wrap' }}>\r\n        <TextField\r\n          placeholder=\"Search threads...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          sx={{ minWidth: 250 }}\r\n          InputProps={{\r\n            startAdornment: (\r\n              <InputAdornment position=\"start\">\r\n                <SearchIcon />\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n        \r\n        <FormControl sx={{ minWidth: 150 }}>\r\n          <InputLabel>Category</InputLabel>\r\n          <Select\r\n            value={category}\r\n            label=\"Category\"\r\n            onChange={(e) => setCategory(e.target.value)}\r\n          >\r\n            {categories.map(c => (\r\n              <MenuItem key={c} value={c}>{c}</MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        \r\n        <FormControl sx={{ minWidth: 180 }}>\r\n          <InputLabel>Post Type</InputLabel>\r\n          <Select\r\n            value={postType}\r\n            label=\"Post Type\"\r\n            onChange={(e) => setPostType(e.target.value)}\r\n          >\r\n            <MenuItem value=\"\">All Post Types</MenuItem>\r\n            <MenuItem value=\"Announcement\">Announcement</MenuItem>\r\n            <MenuItem value=\"Event\">Event</MenuItem>\r\n            <MenuItem value=\"Assignment\">Assignment</MenuItem>\r\n            <MenuItem value=\"Project\">Project</MenuItem>\r\n            <MenuItem value=\"Forum\">Forum</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </Box>\r\n\r\n      {/* Thread Cards */}\r\n      <Grid container spacing={3}>\r\n        {filtered.map(t => (\r\n          <Grid item xs={12} md={6} key={t.id}>\r\n            <Card sx={{ height: '100%', '&:hover': { boxShadow: 6 } }}>\r\n              <CardContent>\r\n                <Typography variant=\"h6\" fontWeight=\"bold\" mb={2}>{t.topic}</Typography>\r\n                \r\n                <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 2 }}>\r\n                  <Chip label={t.category} color=\"primary\" size=\"small\" />\r\n                  {t.accepted && (\r\n                    <Chip \r\n                      label=\"Accepted Solution\" \r\n                      color=\"success\" \r\n                      size=\"small\"\r\n                      icon={<CheckCircleIcon />}\r\n                    />\r\n                  )}\r\n                  {t.anonymous && (\r\n                    <Chip label=\"Anonymous\" color=\"warning\" size=\"small\" />\r\n                  )}\r\n                </Box>\r\n\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\r\n                  <Button\r\n                    size=\"small\"\r\n                    startIcon={<ThumbUpIcon />}\r\n                    onClick={() => handleUpvote(t.id)}\r\n                    color=\"primary\"\r\n                  >\r\n                    {t.upvotes} Upvotes\r\n                  </Button>\r\n                  {canMarkAccepted && (\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleMarkAccepted(t.id)}\r\n                      color={t.accepted ? \"success\" : \"default\"}\r\n                      title={t.accepted ? \"Unmark as accepted\" : \"Mark as accepted\"}\r\n                    >\r\n                      <CheckCircleIcon />\r\n                    </IconButton>\r\n                  )}\r\n                </Box>\r\n\r\n                <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\r\n                  <Button \r\n                    variant=\"contained\" \r\n                    size=\"small\"\r\n                    onClick={() => handleViewThread(t)}\r\n                  >\r\n                    View Thread\r\n                  </Button>\r\n                  <Button variant=\"outlined\" color=\"secondary\" size=\"small\">Moderate</Button>\r\n                  {canDelete(t) && (\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      color=\"error\"\r\n                      onClick={() => handleDeleteThread(t.id)}\r\n                      title=\"Delete thread\"\r\n                    >\r\n                      <DeleteIcon />\r\n                    </IconButton>\r\n                  )}\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    color=\"warning\"\r\n                    onClick={() => handleReport(t.id)}\r\n                    title=\"Report thread\"\r\n                  >\r\n                    <ReportIcon />\r\n                  </IconButton>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n      \r\n      {renderCreateDialog()}\r\n\r\n      {/* View Thread Dialog */}\r\n      <Dialog \r\n        open={showViewDialog} \r\n        onClose={() => setShowViewDialog(false)}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          <Box>\r\n            <Typography variant=\"h5\" fontWeight={600}>{selectedThread?.topic}</Typography>\r\n            <Box sx={{ mt: 1, display: 'flex', gap: 1, flexWrap: 'wrap', alignItems: 'center' }}>\r\n              <Chip label={selectedThread?.category} color=\"primary\" size=\"small\" />\r\n              {selectedThread?.accepted && (\r\n                <Chip \r\n                  label=\"Accepted Solution\" \r\n                  color=\"success\" \r\n                  size=\"small\"\r\n                  icon={<CheckCircleIcon />}\r\n                />\r\n              )}\r\n              {selectedThread?.anonymous ? (\r\n                <Chip label=\"Posted by: Anonymous\" size=\"small\" />\r\n              ) : (\r\n                <Chip label={`Posted by: ${selectedThread?.created_by}`} size=\"small\" />\r\n              )}\r\n              <Chip label={`Date: ${selectedThread?.created_at}`} variant=\"outlined\" size=\"small\" />\r\n              <Box sx={{ display: 'flex', alignItems: 'center', ml: 1 }}>\r\n                <ThumbUpIcon fontSize=\"small\" sx={{ mr: 0.5 }} />\r\n                <Typography variant=\"body2\">{selectedThread?.upvotes} upvotes</Typography>\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          {/* Thread Content */}\r\n          <Box sx={{ mb: 3 }}>\r\n            <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>Content</Typography>\r\n            <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n              {selectedThread?.content}\r\n            </Typography>\r\n          </Box>\r\n\r\n          {/* Google Form/Sheet Links */}\r\n          {(selectedThread?.googleFormLink || selectedThread?.googleSheetLink) && (\r\n            <Box sx={{ mb: 3 }}>\r\n              <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>Related Links</Typography>\r\n              <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n                {selectedThread?.googleFormLink && (\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    startIcon={<OpenInNewIcon />}\r\n                    href={selectedThread.googleFormLink}\r\n                    target=\"_blank\"\r\n                    fullWidth\r\n                    sx={{ mb: selectedThread?.googleSheetLink ? 1 : 0 }}\r\n                  >\r\n                    Open Google Form\r\n                  </Button>\r\n                )}\r\n                {selectedThread?.googleSheetLink && (\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    startIcon={<OpenInNewIcon />}\r\n                    href={selectedThread.googleSheetLink}\r\n                    target=\"_blank\"\r\n                    fullWidth\r\n                  >\r\n                    Open Google Sheet\r\n                  </Button>\r\n                )}\r\n              </Paper>\r\n            </Box>\r\n          )}\r\n\r\n          {/* Attachments */}\r\n          {selectedThread?.attachments && selectedThread.attachments.length > 0 && (\r\n            <Box sx={{ mb: 3 }}>\r\n              <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                Attachments ({selectedThread.attachments.length})\r\n              </Typography>\r\n              <Paper variant=\"outlined\">\r\n                <List>\r\n                  {selectedThread.attachments.map((att, idx) => (\r\n                    <React.Fragment key={att.id || idx}>\r\n                      <ListItem>\r\n                        <AttachFileIcon sx={{ mr: 2, color: 'text.secondary' }} />\r\n                        <ListItemText\r\n                          primary={att.name}\r\n                          secondary={`${formatFileSize(att.size || 0)} â€¢ ${att.type || 'File'}`}\r\n                        />\r\n                        <Button \r\n                          variant=\"outlined\" \r\n                          size=\"small\"\r\n                          onClick={() => {\r\n                            console.log('Download:', att.name);\r\n                          }}\r\n                        >\r\n                          Download\r\n                        </Button>\r\n                      </ListItem>\r\n                      {idx < selectedThread.attachments.length - 1 && <Divider />}\r\n                    </React.Fragment>\r\n                  ))}\r\n                </List>\r\n              </Paper>\r\n            </Box>\r\n          )}\r\n\r\n          {/* TODO: Add replies/comments section here */}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            startIcon={<ThumbUpIcon />}\r\n            onClick={() => {\r\n              handleUpvote(selectedThread.id);\r\n              setSelectedThread({ ...selectedThread, upvotes: selectedThread.upvotes + 1 });\r\n            }}\r\n          >\r\n            Upvote\r\n          </Button>\r\n          {canMarkAccepted && (\r\n            <Button\r\n              startIcon={<CheckCircleIcon />}\r\n              color={selectedThread?.accepted ? \"success\" : \"default\"}\r\n              onClick={() => {\r\n                handleMarkAccepted(selectedThread.id);\r\n                setSelectedThread({ ...selectedThread, accepted: !selectedThread.accepted });\r\n              }}\r\n            >\r\n              {selectedThread?.accepted ? 'Unmark' : 'Mark as Accepted'}\r\n            </Button>\r\n          )}\r\n          <Button onClick={() => setShowViewDialog(false)}>Close</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Notification Snackbar */}\r\n      <Snackbar\r\n        open={notification.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setNotification({ ...notification, open: false })}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n      >\r\n        <Alert \r\n          onClose={() => setNotification({ ...notification, open: false })} \r\n          severity={notification.severity}\r\n          sx={{ width: '100%' }}\r\n        >\r\n          {notification.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Forums;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}