{"ast":null,"code":"var _jsxFileName = \"D:\\\\documents\\\\Desktop\\\\CSE-DB\\\\frontend\\\\src\\\\contexts\\\\SocketContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SocketContext = /*#__PURE__*/createContext(null);\nexport const useSocket = () => {\n  _s();\n  const context = useContext(SocketContext);\n  if (!context) {\n    throw new Error('useSocket must be used within SocketProvider');\n  }\n  return context;\n};\n_s(useSocket, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const SocketProvider = ({\n  children\n}) => {\n  _s2();\n  const [socket, setSocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  useEffect(() => {\n    // Connect to Socket.io server\n    const newSocket = io('http://localhost:4000', {\n      transports: ['polling', 'websocket'],\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n      timeout: 10000,\n      forceNew: false,\n      autoConnect: true,\n      withCredentials: true\n    });\n    newSocket.on('connect', () => {\n      console.log('ðŸ”Œ Socket connected:', newSocket.id);\n      setConnected(true);\n\n      // Join user's personal room if logged in\n      const userData = localStorage.getItem('user');\n      if (userData) {\n        try {\n          const user = JSON.parse(userData);\n          newSocket.emit('join', user.id);\n        } catch (e) {\n          console.error('Error parsing user data:', e);\n        }\n      }\n    });\n    newSocket.on('disconnect', () => {\n      console.log('ðŸ‘‹ Socket disconnected');\n      setConnected(false);\n    });\n    newSocket.on('connect_error', error => {\n      console.error('Socket connection error:', error.message);\n      setConnected(false);\n    });\n    setSocket(newSocket);\n    return () => {\n      newSocket.close();\n    };\n  }, []);\n  const on = useCallback((event, callback) => {\n    if (socket) {\n      socket.on(event, callback);\n    }\n  }, [socket]);\n  const off = useCallback((event, callback) => {\n    if (socket) {\n      socket.off(event, callback);\n    }\n  }, [socket]);\n  const emit = useCallback((event, data) => {\n    if (socket) {\n      socket.emit(event, data);\n    }\n  }, [socket]);\n  const value = {\n    socket,\n    connected,\n    on,\n    off,\n    emit\n  };\n  return /*#__PURE__*/_jsxDEV(SocketContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s2(SocketProvider, \"YOjTZgpSPPneD9KMc1NAXtnQHu8=\");\n_c = SocketProvider;\nvar _c;\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","useCallback","io","jsxDEV","_jsxDEV","SocketContext","useSocket","_s","context","Error","SocketProvider","children","_s2","socket","setSocket","connected","setConnected","newSocket","transports","reconnection","reconnectionAttempts","reconnectionDelay","timeout","forceNew","autoConnect","withCredentials","on","console","log","id","userData","localStorage","getItem","user","JSON","parse","emit","e","error","message","close","event","callback","off","data","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/documents/Desktop/CSE-DB/frontend/src/contexts/SocketContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst SocketContext = createContext(null);\r\n\r\nexport const useSocket = () => {\r\n  const context = useContext(SocketContext);\r\n  if (!context) {\r\n    throw new Error('useSocket must be used within SocketProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [connected, setConnected] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Connect to Socket.io server\r\n    const newSocket = io('http://localhost:4000', {\r\n      transports: ['polling', 'websocket'],\r\n      reconnection: true,\r\n      reconnectionAttempts: 5,\r\n      reconnectionDelay: 1000,\r\n      timeout: 10000,\r\n      forceNew: false,\r\n      autoConnect: true,\r\n      withCredentials: true\r\n    });\r\n\r\n    newSocket.on('connect', () => {\r\n      console.log('ðŸ”Œ Socket connected:', newSocket.id);\r\n      setConnected(true);\r\n      \r\n      // Join user's personal room if logged in\r\n      const userData = localStorage.getItem('user');\r\n      if (userData) {\r\n        try {\r\n          const user = JSON.parse(userData);\r\n          newSocket.emit('join', user.id);\r\n        } catch (e) {\r\n          console.error('Error parsing user data:', e);\r\n        }\r\n      }\r\n    });\r\n\r\n    newSocket.on('disconnect', () => {\r\n      console.log('ðŸ‘‹ Socket disconnected');\r\n      setConnected(false);\r\n    });\r\n\r\n    newSocket.on('connect_error', (error) => {\r\n      console.error('Socket connection error:', error.message);\r\n      setConnected(false);\r\n    });\r\n\r\n    setSocket(newSocket);\r\n\r\n    return () => {\r\n      newSocket.close();\r\n    };\r\n  }, []);\r\n\r\n  const on = useCallback((event, callback) => {\r\n    if (socket) {\r\n      socket.on(event, callback);\r\n    }\r\n  }, [socket]);\r\n\r\n  const off = useCallback((event, callback) => {\r\n    if (socket) {\r\n      socket.off(event, callback);\r\n    }\r\n  }, [socket]);\r\n\r\n  const emit = useCallback((event, data) => {\r\n    if (socket) {\r\n      socket.emit(event, data);\r\n    }\r\n  }, [socket]);\r\n\r\n  const value = {\r\n    socket,\r\n    connected,\r\n    on,\r\n    off,\r\n    emit\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={value}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}