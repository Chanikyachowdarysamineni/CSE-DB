{"ast":null,"code":"var _jsxFileName = \"D:\\\\documents\\\\Desktop\\\\CSE-DB\\\\frontend\\\\src\\\\components\\\\DeadlineNotifier.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Snackbar, Alert, Badge } from '@mui/material';\nimport { UserContext } from '../App';\n\n// Component to check and notify about upcoming deadlines\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeadlineNotifier = () => {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  const [notification, setNotification] = useState(null);\n  const [open, setOpen] = useState(false);\n  useEffect(() => {\n    if (user && user.role === 'Student') {\n      // Check for deadlines every 5 minutes\n      const checkDeadlines = () => {\n        fetch('/api/deadlines/upcoming', {\n          credentials: 'include'\n        }).then(res => res.json()).then(data => {\n          // Check for deadlines within 3 days\n          const urgentDeadlines = data.filter(d => {\n            const daysLeft = Math.ceil((new Date(d.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\n            return daysLeft > 0 && daysLeft <= 3;\n          });\n          if (urgentDeadlines.length > 0) {\n            const deadline = urgentDeadlines[0];\n            const daysLeft = Math.ceil((new Date(deadline.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\n            setNotification({\n              message: `Reminder: \"${deadline.title}\" (${deadline.subjectCode}) is due in ${daysLeft} day${daysLeft > 1 ? 's' : ''}!`,\n              severity: daysLeft <= 1 ? 'error' : 'warning'\n            });\n            setOpen(true);\n\n            // Play notification sound\n            const audio = new Audio('/notification.mp3');\n            audio.play().catch(e => console.log('Audio play failed:', e));\n          }\n        }).catch(error => {\n          console.log('Error fetching deadlines:', error);\n          // Use mock data for development\n          const mockDeadlines = [{\n            id: 1,\n            title: 'Database Assignment 3',\n            subjectCode: 'CSE401',\n            dueDate: '2025-12-02'\n          }, {\n            id: 2,\n            title: 'AI Project Submission',\n            subjectCode: 'CSE502',\n            dueDate: '2025-12-01'\n          }];\n          const urgentDeadlines = mockDeadlines.filter(d => {\n            const daysLeft = Math.ceil((new Date(d.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\n            return daysLeft > 0 && daysLeft <= 3;\n          });\n          if (urgentDeadlines.length > 0) {\n            const deadline = urgentDeadlines[0];\n            const daysLeft = Math.ceil((new Date(deadline.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\n            setNotification({\n              message: `Reminder: \"${deadline.title}\" (${deadline.subjectCode}) is due in ${daysLeft} day${daysLeft > 1 ? 's' : ''}!`,\n              severity: daysLeft <= 1 ? 'error' : 'warning'\n            });\n            setOpen(true);\n          }\n        });\n      };\n\n      // Check immediately on mount\n      checkDeadlines();\n\n      // Then check every 5 minutes\n      const interval = setInterval(checkDeadlines, 5 * 60 * 1000);\n      return () => clearInterval(interval);\n    }\n  }, [user]);\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n  if (!notification) return null;\n  return /*#__PURE__*/_jsxDEV(Snackbar, {\n    open: open,\n    autoHideDuration: 10000,\n    onClose: handleClose,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    children: /*#__PURE__*/_jsxDEV(Alert, {\n      onClose: handleClose,\n      severity: notification.severity,\n      variant: \"filled\",\n      sx: {\n        width: '100%'\n      },\n      children: notification.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(DeadlineNotifier, \"yBQd97eFUubed3rCQE2dJDclc8c=\");\n_c = DeadlineNotifier;\nexport default DeadlineNotifier;\nvar _c;\n$RefreshReg$(_c, \"DeadlineNotifier\");","map":{"version":3,"names":["React","useEffect","useState","useContext","Snackbar","Alert","Badge","UserContext","jsxDEV","_jsxDEV","DeadlineNotifier","_s","user","notification","setNotification","open","setOpen","role","checkDeadlines","fetch","credentials","then","res","json","data","urgentDeadlines","filter","d","daysLeft","Math","ceil","Date","dueDate","length","deadline","message","title","subjectCode","severity","audio","Audio","play","catch","e","console","log","error","mockDeadlines","id","interval","setInterval","clearInterval","handleClose","event","reason","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","children","variant","sx","width","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/documents/Desktop/CSE-DB/frontend/src/components/DeadlineNotifier.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { Snackbar, Alert, Badge } from '@mui/material';\r\nimport { UserContext } from '../App';\r\n\r\n// Component to check and notify about upcoming deadlines\r\nconst DeadlineNotifier = () => {\r\n  const { user } = useContext(UserContext);\r\n  const [notification, setNotification] = useState(null);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user && user.role === 'Student') {\r\n      // Check for deadlines every 5 minutes\r\n      const checkDeadlines = () => {\r\n        fetch('/api/deadlines/upcoming', { credentials: 'include' })\r\n          .then(res => res.json())\r\n          .then(data => {\r\n            // Check for deadlines within 3 days\r\n            const urgentDeadlines = data.filter(d => {\r\n              const daysLeft = Math.ceil((new Date(d.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\r\n              return daysLeft > 0 && daysLeft <= 3;\r\n            });\r\n\r\n            if (urgentDeadlines.length > 0) {\r\n              const deadline = urgentDeadlines[0];\r\n              const daysLeft = Math.ceil((new Date(deadline.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\r\n              \r\n              setNotification({\r\n                message: `Reminder: \"${deadline.title}\" (${deadline.subjectCode}) is due in ${daysLeft} day${daysLeft > 1 ? 's' : ''}!`,\r\n                severity: daysLeft <= 1 ? 'error' : 'warning'\r\n              });\r\n              setOpen(true);\r\n\r\n              // Play notification sound\r\n              const audio = new Audio('/notification.mp3');\r\n              audio.play().catch(e => console.log('Audio play failed:', e));\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.log('Error fetching deadlines:', error);\r\n            // Use mock data for development\r\n            const mockDeadlines = [\r\n              { id: 1, title: 'Database Assignment 3', subjectCode: 'CSE401', dueDate: '2025-12-02' },\r\n              { id: 2, title: 'AI Project Submission', subjectCode: 'CSE502', dueDate: '2025-12-01' }\r\n            ];\r\n            \r\n            const urgentDeadlines = mockDeadlines.filter(d => {\r\n              const daysLeft = Math.ceil((new Date(d.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\r\n              return daysLeft > 0 && daysLeft <= 3;\r\n            });\r\n\r\n            if (urgentDeadlines.length > 0) {\r\n              const deadline = urgentDeadlines[0];\r\n              const daysLeft = Math.ceil((new Date(deadline.dueDate) - new Date()) / (1000 * 60 * 60 * 24));\r\n              \r\n              setNotification({\r\n                message: `Reminder: \"${deadline.title}\" (${deadline.subjectCode}) is due in ${daysLeft} day${daysLeft > 1 ? 's' : ''}!`,\r\n                severity: daysLeft <= 1 ? 'error' : 'warning'\r\n              });\r\n              setOpen(true);\r\n            }\r\n          });\r\n      };\r\n\r\n      // Check immediately on mount\r\n      checkDeadlines();\r\n\r\n      // Then check every 5 minutes\r\n      const interval = setInterval(checkDeadlines, 5 * 60 * 1000);\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [user]);\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  if (!notification) return null;\r\n\r\n  return (\r\n    <Snackbar \r\n      open={open} \r\n      autoHideDuration={10000} \r\n      onClose={handleClose}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n    >\r\n      <Alert onClose={handleClose} severity={notification.severity} variant=\"filled\" sx={{ width: '100%' }}>\r\n        {notification.message}\r\n      </Alert>\r\n    </Snackbar>\r\n  );\r\n};\r\n\r\nexport default DeadlineNotifier;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}